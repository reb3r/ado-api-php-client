language: php
os: linux
cache:
  directories:
    - $HOME/.composer/cache
    - vendor
php:
- 8.0
install:
- composer install

before_script:
    - wget https://github.com/infection/infection/releases/download/0.24.0/infection.phar
    - wget https://github.com/infection/infection/releases/download/0.24.0/infection.phar.asc
    - gpg --recv-keys C6D76C329EBADE2FB9C458CFC5095986493B4AA0
    - gpg --with-fingerprint --verify infection.phar.asc infection.phar
    - chmod +x infection.phar

script:
- vendor/bin/phpunit tests
- ./infection.phar --min-msi=48 --threads=4
